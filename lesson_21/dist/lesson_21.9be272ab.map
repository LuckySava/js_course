{"version":3,"sources":["location_api.js","dom.js","index.js"],"names":["LocationApi","fetch","method","then","res","status","json","Promise","reject","ip","Dom","preloader","document","getElementById","location","style","opacity","coordinates","innerHTML","locationApi","dom","showPreloader","getMyIp","getMyLocation","hidePreloader","setCoordinates","JSON","stringify","catch","eror","console","log"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEbrB;;;;AACA;;;;;;AAxBA;AACA;;AAEA;;;AAIA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAMA,IAAMmB,cAAc,IAAInB,sBAAJ,EAApB;AACA,IAAMoB,MAAM,IAAIV,aAAJ,EAAZ;;AAEAU,IAAIC,aAAJ;AACAF,YAAYG,OAAZ,GACGnB,IADH,CACQ,UAACC,GAAD,EAAS;AACb,SAAOe,YAAYI,aAAZ,CAA0BnB,IAAIK,EAA9B,CAAP;AACD,CAHH,EAIGN,IAJH,CAIQ,UAACC,GAAD,EAAS;AACbgB,MAAII,aAAJ;AACAJ,MAAIK,cAAJ,CAAmBC,KAAKC,SAAL,CAAevB,GAAf,CAAnB;AACD,CAPH,EAQGwB,KARH,CAQS,UAACC,IAAD,EAAU;AACfC,UAAQC,GAAR,CAAYF,IAAZ;AACD,CAVH","file":"lesson_21.9be272ab.map","sourceRoot":"..","sourcesContent":["// export default class LocationApi {\r\n//     // constructor() {\r\n//     // }\r\n//     getMyIp() {\r\n//         fetch(\"https://api.ipify.org?format=json\")\r\n//         .then(res => {\r\n//             // if(res.status >= 200 && res.status <= 300) {\r\n//             //     return res.json();\r\n//             // }\r\n//             if(res.status === 200) {\r\n//                 return res.json();\r\n//             } else {\r\n//                 throw new Error('error ip')\r\n//             }\r\n            \r\n//         })\r\n//         .catch(error => console.log(\"We have some problem with it\"));\r\n//     }\r\n//     getMyLocation(ip) {\r\n//         fetch(\"https://freegeoip.net/json/{ip}\")\r\n//             .then(res => {\r\n//                 // if(res.status >= 200 && res.status <= 300) {\r\n//                 //     return res.json();\r\n//                 // }\r\n//                 if(res.status === 200) {\r\n//                     return res.json();\r\n//                 } else {\r\n//                     return Promise.reject(res.status)\r\n//                 }\r\n\r\n//             })\r\n//             .catch(error => console.log(\"We have some problem with it\"));\r\n//     }\r\n\r\n// }\r\n\r\nexport default class LocationApi {\r\n    getMyIp() {\r\n      return fetch('https://api.ipify.org?format=json', {\r\n        method: 'GET',\r\n      })\r\n        .then((res) => {\r\n          if (res.status === 200) {\r\n            return res.json();\r\n          }\r\n  \r\n          return Promise.reject(res.status);\r\n        });\r\n    }\r\n  \r\n    getMyLocation(ip) {\r\n      return fetch(`https://freegeoip.net/json/${ip}`, {\r\n        method: 'GET',\r\n      })\r\n        .then((res) => {\r\n          if (res.status === 200) {\r\n            return res.json();\r\n          }\r\n  \r\n          return Promise.reject(res.status);\r\n        });\r\n    }\r\n  }","// export default class Dom {\r\n//     constructor() {\r\n//         this.firstField = document.getElementById(\"field1\"),\r\n//             this.secondField = document.getElementById(\"field2\"),\r\n//             this.thirdField = document.getElementById(\"field3\"),\r\n//             this.forthField = document.getElementById(\"field4\"),\r\n//             this.preload = document.getElementById(\"preload\");\r\n//     }\r\n//     showPreloader() {\r\n\r\n//         this.preload.classList.add(\"preloading\");\r\n//     }\r\n//     hidePreloader() {\r\n\r\n//         setTimeout(() => {\r\n//             this.preload.classList.remove(\"preloading\");\r\n//         }, 1000);\r\n\r\n//     }\r\n//     setCoordinates(coordinate) {\r\n//             this.firstField.value = coordinate.country_name;\r\n//             this.secondField.value = coordinate.city;\r\n//             this.thirdField.value = coordinate.longitude;\r\n//             this.forthField.value = coordinate.latitude;\r\n//     }\r\n// }\r\n\r\nexport default class Dom {\r\n    constructor() {\r\n      this.preloader = document.getElementById('preloader');\r\n      this.location = document.getElementById('location');\r\n    }\r\n  \r\n    showPreloader() {\r\n      this.preloader.style.opacity = 1;\r\n    //   this.location.style.opacity = 0;\r\n    }\r\n  \r\n    hidePreloader() {\r\n      this.preloader.style.opacity = 0;\r\n      this.location.style.opacity = 1;\r\n    }\r\n  \r\n    setCoordinates(coordinates) {\r\n      this.location.innerHTML = coordinates;\r\n    }\r\n  }","// import LocationApi from \"./location_api.js\";\r\n// import Dom from \"./dom.js\"\r\n\r\n// console.log(\"Проверка связи\");\r\n\r\n\r\n\r\n// // >>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<\r\n\r\n// let myLocation = new LocationApi(),\r\n//     myResult = new Dom(),\r\n//     btn = document.getElementById(\"btn\");\r\n\r\n\r\n// btn.addEventListener(\"click\", () => {\r\n//     myResult.showPreloader();\r\n//     myLocation.getMyIp()\r\n//         .then(res => myLocation.getMyLocation(res.ip))\r\n//         .then(res => myResult.setCoordinates(res))\r\n//         .then(res => myResult.hidePreloader())\r\n// });\r\n\r\n\r\nimport LocationApi from './location_api';\r\nimport Dom from './dom';\r\n\r\nconst locationApi = new LocationApi();\r\nconst dom = new Dom();\r\n\r\ndom.showPreloader();\r\nlocationApi.getMyIp()\r\n  .then((res) => {\r\n    return locationApi.getMyLocation(res.ip)\r\n  })\r\n  .then((res) => {\r\n    dom.hidePreloader();\r\n    dom.setCoordinates(JSON.stringify(res));\r\n  })\r\n  .catch((eror) => {\r\n    console.log(eror);\r\n  });"]}